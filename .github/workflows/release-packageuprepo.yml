# This workflows creates deployable binaries suitable for Drupal updates

# The variable ${{github.ref_name}} contains the tag if the workflow was triggered on release
# @see: https://docs.github.com/en/actions/learn-github-actions/contexts#github-context
name: Release | Package Up repository

on:
  #release:
  #  types: [published]
  push:
    branches: ["5.x.x"]


jobs:
  run-script:
    runs-on: ubuntu-latest

    #defaults:
    #  run:
    #    working-directory: .github/releases-feed/nihod5
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Delete .github folder
        run: |
          rm -r -f .github

      - name: Create zip file
        run: |
          zip -r nihod5-v$GITHUB_REF_NAME.zip .
          ls -d *

      - name: Create tar and gzip
        run: |
          tar -cf nihod5-v$GITHUB_REF_NAME.tar .
          tar -czf nihod5-v$GITHUB_REF_NAME.tar.gz nihod5-v$GITHUB_REF_NAME.tar
          ls -d *
       
          
      # Maybe needed in the future
      #
      # - name: Install dependencies
      #   run: pip install -r requirements.txt
      #
      # not needed for now as every library needed
      # in the script already comes with Python
